# Sandbox Environment

This directory contains the logic for executing generated Python code in a secure, isolated Docker environment.

## Overview

The `sandbox.py` script provides a `run_in_docker_sandbox` function that:
1.  Accepts Python code as a string.
2.  Wraps the code with a header to handle output paths and plotting.
3.  Writes the code to a temporary file in `sandbox/code`.
4.  Runs the code inside a Docker container (`llm-sandbox`).
5.  Captures stdout, stderr, and any generated artifacts (plots, files).

## Directory Structure

-   `code/`: Stores the generated Python scripts before execution.
-   `output/`: Stores the artifacts generated by the scripts (e.g., plots).
-   `Dockerfile.sandbox`: The Dockerfile used to build the `llm-sandbox` image.
-   `sandbox.py`: The main script for managing the sandbox execution.

## Prerequisites

-   Docker must be installed and running.
-   The `llm-sandbox` image must be built:
    ```bash
    docker build -t llm-sandbox -f sandbox/Dockerfile.sandbox .
    ```

## Usage

```python
from sandbox.sandbox import run_in_docker_sandbox

code = """
import matplotlib.pyplot as plt
plt.plot([1, 2, 3], [4, 5, 6])
plt.savefig('plot.png')
print("Done")
"""

result = run_in_docker_sandbox(code, name="example_task")
print(result["stdout"])
print(result["artifacts"])
```
